[python入门作业---选课系统 ](https://www.cnblogs.com/Mengchangxin/p/9372156.html)



```txt
角色:学校、学员、课程、讲师
要求:
1. 创建北京、上海 2 所学校
2. 创建linux , python , go 3个课程 ， linux\py 在北京开， go 在上海开
3. 课程包含，周期，价格，通过学校创建课程
4. 通过学校创建班级， 班级关联课程、讲师
5. 创建学员时，选择学校，关联班级
5. 创建讲师角色时要关联学校，
6. 提供两个角色接口
6.1 学员视图， 可以注册， 交学费， 选择班级，
6.2 讲师视图， 讲师可管理自己的班级， 上课时选择班级， 查看班级学员列表 ， 修改所管理的学员的成绩
6.3 管理视图，创建讲师， 创建班级，创建课程

7. 上面的操作产生的数据都通过序列化保存到文件里 
```



# 领域模型 的定义

领域模型是完成从需求分析到面向 对象设计的一座桥梁。 

领域模型,顾名思义,就是需求所涉及的领域的一个建模,更通俗的讲法是业务模型。 参考百度百科词条(http://baike.baidu.com/view/757895.htm )，领域模型定义如下: 

从这个定义我们可以看出,领域模型有两个主要的作用:

1. 发掘重要的业务领域概念
2. 建立业务领域概念之间的关系 

 

 

# 领域建模三字经 

领域建模的方法就是“**从用例中找名词**”。 当然,找到名词后,为了能够更加符合面向对象的要求和特点,我们还需要对这些名词进一步完善,这就 是接下来的步骤:**加属性,连关系**! 

最后我们总结出领域建模的三字经方法:**找名词、加属性、连关系**。 

　　

## 1. 找名词

who : 学员、讲师、管理员

用例：

> 1\. **管理员** 创建了 `xx学院北京校区` 和 `xx学院上海校区` 两个**校区**；
> 2\. 管理员 创建了 `Linux` 、 `Python` 、 `Go` 3个**课程**；
> 3\. 管理员 创建了 北京校区的 `Python 16期`、 `Go 第1期` 和上海校区的 `Linux 36期` **班级**；
> 4\. 管理员 邀请并创建了如下学员账号: `北京校区` 的 **学员** `小晴` ，并将其分配在了 `班级` `Python 16期`； 
> 5\. 管理员 邀请并创建了如下讲师账号: **讲师** `Alex` , 并将其分配担任了 `班级` `Python 16期` 和 `Linux 36期` 的 **讲师**；
> 6\. 讲师Alex 添加了一条 `Python 16期` 的 **授课纪录** `Day1` 并上传了第一天的授课直播录屏文件，然后布置了 `Day1` 的 **作业**；
> 7\. 学员小晴 在 `Python 16期` 的 `Day1` 里提交了 **作业**；
> 8\. 讲师Alex 为 `Day1` 这节课 所有的学员 批改了 **作业**：小晴得了A，李磊得了C-，严帅得了B；
> 9\. 学员李磊 查看了 自己所报的所有 **课程**；
> 10\. 学员李磊 查看了 自己在 `Python 16期` 的 **成绩** 列表 ，然后抑郁了；
> 11\. 学员小晴 跟 讲师 Alex 发送私信提问了一些与课程无关的私人问题；

**名词列表：**

管理员、校区、课程、班级、讲师的授课记录、学员的学习纪录、作业、成绩、讲师、学员

## 2. 加属性

1. 校区：学校名称、简介备注、学校地址、开设课程查询功能、聘任讲师查询功能、班级明细查询功能、学员明细查询功能
2. 课程：课程名称、课程简介(大纲)、所属学校及校区、任课讲师、授课周期(多少周或多少天)、总课时数、招生开班规则（例如报名人数最低满15人可以开班，最高不超过20人之类）、课程定价、其他可选功能包括查询该课程适用哪些营销策略（例如折扣满减优惠券策略、与其他课程套餐搭配销售策略、2人或多人同时报名优惠价策略等)；
3. 班级：学员列表、班主任(或助教)是谁、任课讲师是谁、课程内容、排课课程计划查询功能（起止日期、上课时间、授课方式等）；
4. 排课计划台账：所属班级、任课讲师、排课日期时间、所属课程节次、授课方式（例如现场教学或远程直播）；
5. 授课记录台账：所属班级、任课讲师、实际授课日期时间、所属课程节次、课后作业题目；
6. 课后作业题目（题库）：题目正文内容、所属课程、所属课程节次、出题人(任课讲师)、题目附件上传；
7. 课后作业（答题记录）：课后作业题目、提交学员是谁、学员提交作业日期、作业正文内容及附件上传、讲师批改日期、讲师批语、作业成绩打分。
8. 成绩单台账：所属学员、课后作业所属的课程节次（或成绩单所属考试批次）、真实得分、得分对应的档次（例如ABCD或优良及格）；
9. 讲师账号：讲师姓名、讲师简介、上传的头像、账号登录安全信息（绑定的手机号、微信号或email邮箱等）、可查询讲师现在任教哪些班级或筛选历史任教数据、其他功能包括可查询学员满意度打分或投诉信息等；
10. 学员账号：网名昵称、上传的头像、账号登录安全信息（绑定的手机号、微信号或email邮箱等）、可查询所报班级、可查询课后作业及考试成绩单、其他功能包括查询绑定的付款方式、学费余额、优惠券列表和会员积分等；
11. 账号登录安全信息台账：所属账号、账号类型（区分学员、讲师及后台运维人员）、绑定的手机号、微信号或email邮箱等；
12. 付款方式信息台账：所属账号、账号类型（只区分学员、讲师）；
13. 讲师基础工资台账：所属讲师、所属月份、默认工资结算单位（人民币）、税后工资金额、税率税额；
14. 讲师绩效奖励台账：所属讲师、发生日期、奖惩事由（例如超额完成培训人数任务）、奖惩依据合同条款、奖惩数值、奖品（例如现金奖励扣款、实物奖品或绩效点数奖惩）

**![img](https://images2018.cnblogs.com/blog/1385177/201807/1385177-20180727095540377-2087866428.png)**

## 3. 连关系

领域模型是需求分析的产物，与问题域相关。领域模型是需求分析人员与用户彼此之间交流的语言。

数据模型是系统设计方案与最终编码实现的一部分，数据模型所描述的是用户需求最终在数据结构上的实现，仅此而已。当然数据模型中的概念模型设计与领域模型类似。

通常大家都会过多地考虑最终SQL数据库的表结构字段细节，其实在领域模型设计期间先不必去考虑数据的底层存放细节，只需要优先搞清楚业务描述中所涉及的各种实体以及实体之间的关系网。

![img](https://images2018.cnblogs.com/blog/1385177/201807/1385177-20180727095845859-1324970353.png)



# 附录：样例代码

![img](https://images2018.cnblogs.com/blog/1385177/201807/1385177-20180727165357810-1661114506.png)



```python
#!/usr/bin/env python3
#-*- coding:utf-8 -*-
'''
Administrator 
2018/7/27
'''

class Student:
    def __init__(self,name,age,classes):
        self.name=name
        self.age=age
        self.classes=classes #报名的班级

class Teacher:
    def __init__(self,name,age,classes):
        self.name=name
        self.age=age
        self.classes=classes  #关联的班级

class Classes:
    def __init__(self,class_name,semester,course,sk_date,teacher):
        self.class_name=class_name  #班级名称
        self.semester=semester  #学期
        self.course=course  #课程
        self.sk_date=sk_date #开课日期
        self.teacher=teacher #班级讲师
 
class Course:
    def __init__(self,name,school):
        self.name=name
        self.price=15000
        self.outline='课程大纲'
        self.course_time='周期是：6个月'
        self.school=school

class School:
    def __init__(self,name,address,city):
        self.name=name
        self.address=address
        self.city=city

class ClassRecord:
    def __init__(self,class_name,jc_name,sk_date):
        self.class_name=class_name  #班级
        self.jc_name=jc_name     #节次
        self.sk_date=sk_date     #上课日期

class StudyRecord:
    def __init__(self,class_record,is_sign,sign_date,achievement):
        self.class_record=class_record   #上课记录
        self.sign_in=is_sign           #签到状态
        self.sign_date=sign_date      #签到日期
        self.achievement=achievement  #成绩


if __name__=="__main__":
    beijing_school=School("北京培训中心","北京天安门城楼上","北京")
    shanghai_school = School("上海培训中心", "上海外滩水底", "上海")

    linux_course=Course("linux",beijing_school)
    python_course=Course("python",beijing_school)
    go_course=Course("go",shanghai_school)
```



知识回顾：

https://github.com/Mengchangxin/



```python
#!/usr/bin/env python3
#-*- coding:utf-8 -*-
'''
Administrator 
2018/8/14 
'''
import pickle,os,uuid
class School:
    def __init__(self,name):
        self.name=name
        self.school_id=uuid.uuid1()
 
    def save(self):
        file_address = os.path.join(os.path.dirname(os.path.abspath(__file__)),"accounts","%s.txt"%self.school_id)
        with open(file_address,"wb") as f:
            pickle.dump(self,f)
        #print(file_address)
        # f=open(file_address,"wb")
        # pickle.dump(self,f)
        # f.close()
    @staticmethod
    def get_all():
        obj_list=[]
        address=os.path.join(os.path.dirname(os.path.abspath(__file__)),"accounts")
        for item in os.listdir(address): #/home/tom/下找所有的文件
            item=os.path.join(address,item)
            with open(item,"rb") as f:
                obj=pickle.load(f)
            obj_list.append(obj)
        return obj_list

    def __str__(self):
        return "学校的名称是:%s"%self.name


# s1=School("上海")
# s1.save()
# #/home/tom/1
# s2=School("北京")
# s2.save()
#/home/tom/2

School_obj_list=School.get_all()
for obj in School_obj_list:
    #print("学校名称：%s"%obj.name)
    print(obj)
```